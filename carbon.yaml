# demo file

---
workflow: Create Project from ArdanLabs Service Demo

env:
  base_path: "/Users/njs/go/src/github.com/nslaughter/myservice"

git:
  after: env
  action: clone
  source: https://github.com/ardanlabs/service
  dest: $base_path

shell:
  after: git
  vars:
    dir: $base_path
  commands:
    - rm go.mod go.sum
    - rm -rf vendor
    - go mod init
    - go mod tidy
    - go mod vendor

text_replace:
  after: shell
  vars:
    dir: $base_path
    exclude: ["vendor", ".git"]
  substitutions:
    - {"old": "app/", "new": "cmd/"}
    - {"old": "zarf/", "new": "deploy/"}
    - {"old": "business/", "new": "domain/"}
    - {"old": "foundation/", "new": "infra/"}

path_rename:
  after: text_replace
  vars:
    dir: $base_path
    exclude: ["vendor", ".git"]
  substitutions:
  - {"old": "ardanlabs/service", "new": "nslaughter/myservice"}
  - {"old": "github.com/emadolsky/automaxprocs", "new": "go.uber.org/automaxprocs"}
